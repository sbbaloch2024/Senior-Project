(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{223:function(e,t,a){e.exports=a.p+"static/media/logo.5b6db504.png"},239:function(e,t,a){e.exports=a(428)},244:function(e,t,a){},418:function(e,t){},421:function(e,t,a){},422:function(e,t,a){},423:function(e,t,a){},426:function(e,t,a){},427:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(12),c=a.n(o),l=(a(244),a(16)),s=a(60),i=a(491),m=a(475),u=a(26),d=a(23);var p=Object(d.a)(),h=a(493);var E=()=>{const{enqueueSnackbar:e}=Object(u.useSnackbar)();return t=>t.text().then(a=>{const r=a&&JSON.parse(a);if(!t.ok){-1!==[401,403].indexOf(t.status)&&(b.logout(),e("User Unauthorized",{variant:"error"}));const a=r&&r.message||t.statusText;return Promise.reject(a)}return r})};const g=new h.a(JSON.parse(localStorage.getItem("currentUser"))),b={logout:function(){localStorage.removeItem("currentUser"),g.next(null)},currentUser:g.asObservable(),get currentUserValue(){return g.value}};var S=e=>{let{component:t,...a}=e;return n.a.createElement(l.b,Object.assign({},a,{render:e=>b.currentUserValue?n.a.createElement(t,e):n.a.createElement(l.a,{to:{pathname:"/",state:{from:e.location}}})}))},f=a(481),v=a(479),O=a(118),C=a(477),_=a(480),x=a(494),j=a(77),N=a(164),w=a(33);const y=Object(N.a)(e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}));var T=e=>{const t=function(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E();return(a,r)=>{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:r})};return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/api/users/login",n).then(t).then(e=>(console.log(e),localStorage.setItem("currentUser",JSON.stringify(e)),localStorage.setItem("userId",e.userId),localStorage.setItem("jwtToken",e.token),g.next(e),e)).catch((function(){e("Failed to Login",{variant:"error"})}))}}(),a=y();return n.a.createElement("div",{className:a.paper},n.a.createElement(C.a,{container:!0},n.a.createElement(C.a,{item:!0},n.a.createElement(j.a,{component:"h1",variant:"h5",align:"center"},"Sign in"),n.a.createElement(O.a,{initialValues:{username:"",password:""},validationSchema:w.object().shape({username:w.string().required("Username is required").max(40,"Username is too long"),password:w.string().required("Password is required").max(100,"Password is too long").min(6,"Password too short")}),onSubmit:(e,a)=>{let{username:r,password:n}=e,{setStatus:o,setSubmitting:c}=a;o(),t(r,n).then(()=>{const{from:e}=p.location.state||{from:{pathname:"/home"}};p.push(e)},e=>{c(!1),o(e)})}},e=>{let{handleSubmit:t,handleChange:r,values:o,touched:c,errors:l}=e;return n.a.createElement("form",{onSubmit:t,className:a.form},n.a.createElement(x.a,{id:"username",className:a.textField,name:"username",label:"Username",fullWidth:!0,variant:"outlined",margin:"normal",required:!0,helperText:c.username?l.username:"",error:c.username&&Boolean(l.username),value:o.username,onChange:r}),n.a.createElement(x.a,{id:"password",className:a.textField,name:"password",label:"Password",fullWidth:!0,variant:"outlined",margin:"normal",required:!0,helperText:c.password?l.password:"",error:c.password&&Boolean(l.password),value:o.password,onChange:r,type:"password"}),n.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Login"))})),n.a.createElement(C.a,{item:!0,xs:9},n.a.createElement(j.a,null,n.a.createElement(_.a,{onClick:()=>e.handleClick("register"),href:"#"},"Don't have an account?")))))},P=a(435);const k=Object(P.a)(e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}));var R=e=>{const t=function(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E();return(a,r,n,o)=>{const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,username:r,password:n,password2:o})};return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/api/users/register",c).then(t).then(e=>(localStorage.setItem("currentUser",JSON.stringify(e)),localStorage.setItem("userId",e.userId),localStorage.setItem("jwtToken",e.token),g.next(e),e)).catch((function(t){e(t||"Failed to Register",{variant:"error"})}))}}(),a=k();return n.a.createElement("div",{className:a.paper},n.a.createElement(C.a,{container:!0},n.a.createElement(C.a,{item:!0},n.a.createElement(j.a,{component:"h1",variant:"h5",align:"center"},"Register"),n.a.createElement(O.a,{initialValues:{name:"",username:"",password:"",password2:""},validationSchema:w.object().shape({name:w.string().required("Name is required").max(40,"Too Long!"),username:w.string().required("Username is required").max(40,"Username address too long"),password:w.string().required("Password is Required").max(100,"Password too long").min(6,"Password should be at least 6 characters long"),password2:w.string().oneOf([w.ref("password"),null],"Passwords do not match")}),onSubmit:(e,a)=>{let{name:r,username:n,password:o,password2:c}=e,{setStatus:l,setSubmitting:s}=a;l(),t(r,n,o,c).then(e=>{const{from:t}=p.location.state||{from:{pathname:"/home"}};p.push(t)},e=>{s(!1),l(e)})},validateOnChange:!1,validateOnBlur:!1},e=>{let{handleSubmit:t,handleChange:r,values:o,touched:c,isValid:l,errors:s}=e;return n.a.createElement("form",{onSubmit:t,className:a.form},n.a.createElement(x.a,{id:"name",className:a.textField,name:"name",label:"Name",fullWidth:!0,variant:"outlined",margin:"normal",required:!0,helperText:c.name?s.name:"",error:c.name&&Boolean(s.name),value:o.name,onChange:r}),n.a.createElement(x.a,{id:"username",className:a.textField,name:"username",label:"Username",fullWidth:!0,variant:"outlined",margin:"normal",required:!0,helperText:c.username?s.username:"",error:c.username&&Boolean(s.username),value:o.username,onChange:r}),n.a.createElement(x.a,{id:"password",className:a.textField,name:"password",label:"Password",fullWidth:!0,variant:"outlined",margin:"normal",required:!0,helperText:c.password?s.password:"",error:c.password&&Boolean(s.password),value:o.password,onChange:r,type:"password"}),n.a.createElement(x.a,{id:"password2",className:a.textField,name:"password2",label:"Confirm Password",fullWidth:!0,variant:"outlined",margin:"normal",required:!0,helperText:c.password2?s.password2:"",error:c.password2&&Boolean(s.password2),value:o.password2,onChange:r,type:"password"}),n.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Register"))})),n.a.createElement(C.a,{item:!0,xs:9},n.a.createElement(j.a,null,n.a.createElement(_.a,{onClick:()=>e.handleClick("login"),href:"#"},"Already have an account?")))))};var I=()=>{const[e,t]=Object(r.useState)("login");Object(r.useEffect)(()=>{b.currentUserValue&&p.push("/home")},[]);const a=e=>{t(e)};let o;return o="login"===e?n.a.createElement(T,{handleClick:a}):n.a.createElement(R,{handleClick:a}),n.a.createElement(f.a,{component:"main",maxWidth:"xs"},o)},U=a(230),A=a(495),D=a(490),L=a(482),W=a(483),B=a(227),K=a(486),H=a(225),q=a.n(H),$=a(224),V=a.n($),F=a(223),G=a.n(F),J=a(53),M=a(41),z=a(484),Q=a(485);const Y=Object(N.a)(e=>({root:{flexGrow:1},title:{flexGrow:1,display:"flex",color:"black"},appBar:{height:"80px",backgroundColor:"white !important"},userDropdown:{marginTop:e.spacing(1),marginLeft:e.spacing(2),padding:e.spacing(1),[e.breakpoints.down("xs")]:{marginLeft:"auto"},color:"black",fontFamily:"Times New Roman"},searchInput:{color:"black",marginRight:e.spacing(40),marginTop:e.spacing(1),justifyContent:"center",borderRadius:"15px","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"black",borderRadius:"25px"},"&:hover fieldset":{borderColor:"black",borderRadius:"25px"},"&.Mui-focused fieldset":{borderColor:"black",borderRadius:"25px"}},"& .MuiInputBase-input":{padding:e.spacing(1)},width:"100%",maxWidth:"500px",color:"black"},button:{marginTop:e.spacing(1),color:"black",fontFamily:"Times New Roman"}}));var X=()=>{const[e]=Object(r.useState)(b.currentUserValue),[t,a]=Object(r.useState)(null),[o,c]=Object(r.useState)(!1),[s,i]=Object(r.useState)(""),[m,u]=Object(r.useState)(null),d=Object(l.f)(),p=Y();return n.a.createElement("div",{className:p.root},n.a.createElement(L.a,{position:"static",classes:{colorPrimary:p.appBar}},n.a.createElement(W.a,null,n.a.createElement(_.a,{href:"/",className:p.title},n.a.createElement("img",{src:G.a,alt:"Logo",style:{width:"200px",height:"auto",marginTop:"10px"}})),n.a.createElement(x.a,{placeholder:"Search and hit the search icon",value:s,onChange:e=>i(e.target.value),className:p.searchInput,variant:"outlined",size:"small",style:{backgroundColor:"#f9f9f9"},InputProps:{startAdornment:n.a.createElement(z.a,{position:"start"},n.a.createElement(Q.a,{onClick:async()=>{const e="http://localhost:4000/api/products/search?search="+encodeURIComponent(s);try{const t=await fetch(e),a=await t.json();console.log(a),t.ok?(console.log("Search results:",a.products),d.push("/search-results/"+encodeURIComponent(s))):console.error("Search failed:",a.message)}catch(t){console.error("Network error:",t)}}},"  ",n.a.createElement(J.a,{icon:M.e})))}}),n.a.createElement(v.a,{"aria-owns":t?"simple-menu":void 0,"aria-haspopup":"true",onClick:e=>{c(!0),a(e.currentTarget)},className:p.userDropdown,color:"inherit",size:"large"},e.name,o?n.a.createElement(V.a,null):n.a.createElement(q.a,null)),n.a.createElement(B.a,{id:"simple-menu",anchorEl:t,open:Boolean(t),onClose:()=>{c(!1),a(null)},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},n.a.createElement(K.a,{onClick:()=>{b.logout(),d.push("/")}},"Logout"),n.a.createElement(K.a,{onClick:()=>{d.push("/add-product")}},"Add Product"),n.a.createElement(K.a,{onClick:()=>{d.push("/my-products/"+e.userId)}},"My Adds"),n.a.createElement(K.a,{onClick:()=>{d.push("/chat")}},"Chats"),n.a.createElement(K.a,{onClick:()=>{d.push("/home")}},"Home"),n.a.createElement(K.a,{onClick:()=>{d.push("/reports/"+e.userId)}},"Reports")))))},Z=a(226),ee=a.n(Z),te=a(478),ae=a(434),re=a(488),ne=a(487),oe=a(496),ce=a(74),le=a.n(ce),se=a(113),ie=a.n(se),me=e=>String(e).split(" ").map(e=>e.charAt(0)).join("");var ue=function(){const e=b.currentUserValue;return e&&e.token?{Authorization:""+e.token,"Content-Type":"application/json"}:{}};function de(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E(),a={method:"GET",headers:ue()};return r=>fetch(`${Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL}/api/messages/conversations/query?userId=${r}`,a).then(t).catch(()=>e("Could not load chats",{variant:"error"}))}const pe=Object(N.a)(e=>({root:{height:"100%"},headerRow:{maxHeight:60,zIndex:5},paper:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:e.palette.primary.dark},messageContainer:{height:"100%",display:"flex",alignContent:"flex-end"},messagesRow:{maxHeight:"calc(100vh - 184px)",overflowY:"auto"},newMessageRow:{width:"100%",padding:e.spacing(0,2,1)},messageBubble:{padding:10,border:"1px solid white",backgroundColor:"white",borderRadius:"0 10px 10px 10px",boxShadow:"-3px 4px 4px 0px rgba(0,0,0,0.08)",marginTop:8,maxWidth:"40em"},messageBubbleRight:{borderRadius:"10px 0 10px 10px"},inputRow:{display:"flex",alignItems:"flex-end"},form:{width:"100%"},avatar:{margin:e.spacing(1,1.5)},listItem:{display:"flex",width:"100%"},listItemRight:{flexDirection:"row-reverse"}}));var he=e=>{const[t]=Object(r.useState)(b.currentUserValue.userId),[a,o]=Object(r.useState)(""),[c,l]=Object(r.useState)([]),[s,i]=Object(r.useState)(null),m=function(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E(),a={method:"GET",headers:ue()};return()=>fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/api/messages/global",a).then(t).catch(()=>e("Could not load Global Chat",{variant:"error"}))}(),d=function(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E();return a=>{const r={method:"POST",headers:ue(),body:JSON.stringify({body:a,global:!0})};return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/api/messages/global",r).then(t).catch(t=>{console.log(t),e("Could send message",{variant:"error"})})}}(),p=de(),h=function(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E();return(a,r)=>{const n={method:"POST",headers:ue(),body:JSON.stringify({to:a,body:r})};return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/api/messages/",n).then(t).catch(t=>{console.log(t),e("Could send message",{variant:"error"})})}}();let g=Object(r.useRef)(null);const S=pe();Object(r.useEffect)(()=>{f(),v()},[s,e.scope,e.conversationId]),Object(r.useEffect)(()=>{le()(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL).on("messages",e=>i(e))},[]);const f=()=>{"Global Chat"===e.scope?m().then(e=>{l(e)}):null!==e.scope&&null!==e.conversationId?p(e.user._id).then(e=>l(e)):l([])},v=()=>{g.current.scrollIntoView({behavior:"smooth"})};Object(r.useEffect)(v,[c]);return n.a.createElement(C.a,{container:!0,className:S.root},n.a.createElement(C.a,{item:!0,xs:12,className:S.headerRow},n.a.createElement(U.a,{className:S.paper,square:!0,elevation:2},n.a.createElement(j.a,{color:"inherit",variant:"h6"},e.scope))),n.a.createElement(C.a,{item:!0,xs:12},n.a.createElement(C.a,{container:!0,className:S.messageContainer},n.a.createElement(C.a,{item:!0,xs:12,className:S.messagesRow},c&&n.a.createElement(te.a,null,c.map(e=>n.a.createElement(ae.a,{key:e._id,className:ie()(S.listItem,{[""+S.listItemRight]:e.fromObj[0]._id===t}),alignItems:"flex-start"},n.a.createElement(ne.a,{className:S.avatar},n.a.createElement(oe.a,null,me(e.fromObj[0].name))),n.a.createElement(re.a,{classes:{root:ie()(S.messageBubble,{[""+S.messageBubbleRight]:e.fromObj[0]._id===t})},primary:e.fromObj[0]&&e.fromObj[0].name,secondary:n.a.createElement(n.a.Fragment,null,e.body)})))),n.a.createElement("div",{ref:g})),n.a.createElement(C.a,{item:!0,xs:12,className:S.inputRow},n.a.createElement("form",{onSubmit:t=>{t.preventDefault(),"Global Chat"===e.scope?d(a).then(()=>{o("")}):h(e.user._id,a).then(e=>{o("")})},className:S.form},n.a.createElement(C.a,{container:!0,className:S.newMessageRow,alignItems:"flex-end"},n.a.createElement(C.a,{item:!0,xs:11},n.a.createElement(x.a,{id:"message",label:"Message",variant:"outlined",margin:"dense",fullWidth:!0,value:a,onChange:e=>o(e.target.value)})),n.a.createElement(C.a,{item:!0,xs:1},n.a.createElement(Q.a,{type:"submit"},n.a.createElement(ee.a,null)))))))))},Ee=a(489);const ge=Object(N.a)(e=>({subheader:{display:"flex",alignItems:"center",cursor:"pointer"},globe:{backgroundColor:e.palette.primary.dark},subheaderText:{color:e.palette.primary.dark},list:{maxHeight:"calc(100vh - 112px)",overflowY:"auto"}}));var be=e=>{const t=ge(),[a,o]=Object(r.useState)([]),[c,l]=Object(r.useState)(null),s=function(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E(),a={method:"GET",headers:ue()};return()=>fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/api/messages/conversations",a).then(t).catch(()=>e("Could not load chats",{variant:"error"}))}(),i=e=>{for(let t=0;t<e.length;t++)if(e[t].username!==b.currentUserValue.username)return e[t];return null};return Object(r.useEffect)(()=>{s().then(e=>o(e))},[c]),Object(r.useEffect)(()=>{let e=le()(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL);return e.on("messages",e=>l(e)),()=>{e.removeListener("messages")}},[]),n.a.createElement(te.a,{className:t.list},n.a.createElement(ae.a,{classes:{root:t.subheader},onClick:()=>{e.setScope("Global Chat")}},n.a.createElement(re.a,{className:t.subheaderText,primary:"Chat with Seller"})),n.a.createElement(Ee.a,null),a&&n.a.createElement(n.a.Fragment,null,a.map(a=>n.a.createElement(ae.a,{className:t.listItem,key:a._id,button:!0,onClick:()=>{e.setUser(i(a.recipientObj)),e.setScope(i(a.recipientObj).name)}},n.a.createElement(ne.a,null,n.a.createElement(oe.a,null,me(i(a.recipientObj).name))),n.a.createElement(re.a,{primary:i(a.recipientObj).name,secondary:n.a.createElement(n.a.Fragment,null,a.lastMessage)})))))};const Se=Object(N.a)(e=>({subheader:{display:"flex",alignItems:"center",cursor:"pointer"},globe:{backgroundColor:e.palette.primary.dark},subheaderText:{color:e.palette.primary.dark},list:{maxHeight:"calc(100vh - 112px)",overflowY:"auto"},avatar:{margin:e.spacing(0,3,0,1)}}));var fe=e=>{const t=Se(),[a,o]=Object(r.useState)([]),[c,l]=Object(r.useState)(null),s=function(){const{enqueueSnackbar:e}=Object(u.useSnackbar)(),t=E(),a={method:"GET",headers:ue()};return()=>fetch(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL+"/api/users",a).then(t).catch(()=>e("Could not load Users",{variant:"error"}))}();return Object(r.useEffect)(()=>{s().then(e=>o(e))},[c]),Object(r.useEffect)(()=>{le()(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL).on("users",e=>{l(e)})},[]),n.a.createElement(te.a,{className:t.list},a&&n.a.createElement(n.a.Fragment,null,a.map(a=>n.a.createElement(ae.a,{className:t.listItem,key:a._id,onClick:()=>{e.setUser(a),e.setScope(a.name)},button:!0},n.a.createElement(ne.a,{className:t.avatar},n.a.createElement(oe.a,null,me(a.name))),n.a.createElement(re.a,{primary:a.name})))))};const ve=Object(N.a)(e=>({paper:{minHeight:"calc(100vh - 64px)",borderRadius:0},sidebar:{zIndex:8},subheader:{display:"flex",alignItems:"center",cursor:"pointer"},globe:{backgroundColor:e.palette.primary.dark},subheaderText:{color:e.palette.primary.dark}}));var Oe=()=>{const[e,t]=Object(r.useState)("Global Chat"),[a,o]=Object(r.useState)(0),[c,l]=Object(r.useState)(null),s=ve();return n.a.createElement(n.a.Fragment,null,n.a.createElement(X,null),n.a.createElement(C.a,{container:!0},n.a.createElement(C.a,{item:!0,md:4,className:s.sidebar},n.a.createElement(U.a,{className:s.paper,square:!0,elevation:5},n.a.createElement(U.a,{square:!0},n.a.createElement(A.a,{onChange:(e,t)=>{o(t)},variant:"fullWidth",value:a,indicatorColor:"primary",textColor:"primary"},n.a.createElement(D.a,{label:"Chats"}),n.a.createElement(D.a,{label:"Users"}))),0===a&&n.a.createElement(be,{setUser:l,setScope:t}),1===a&&n.a.createElement(fe,{setUser:l,setScope:t}))),"Global Chat"!==e&&n.a.createElement(C.a,{item:!0,md:8},n.a.createElement(he,{scope:e,user:c}))))},Ce=a(22),_e=a(492);a(421);var xe=["All Categories","Bikes","Mobiles","Tops","Jackets","Shoes","Electronics"];a(422);var je=function(e){const[t,a]=Object(r.useState)(null),[o,c]=Object(r.useState)(null);return o?n.a.createElement(l.a,{to:o}):n.a.createElement("div",{className:"cat-container"},n.a.createElement("div",null,xe&&xe.length>0&&xe.map((e,r)=>n.a.createElement("span",{onClick:()=>(e=>{a(e),c("/category/"+e)})(e),key:r,className:"category "+(t===e?"selected":"")},e))))};const Ne=Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASE_URL;console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/Senior-Project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),"API_URL");var we=Ne;a(423);var ye=function(){const[e,t]=Object(r.useState)([]),[a,o]=Object(r.useState)([]),[c,s]=Object(r.useState)(""),[i,m]=Object(r.useState)(!1),[u,d]=Object(r.useState)(null);Object(r.useEffect)(()=>{if(p(),u)return n.a.createElement(l.a,{to:u})},[]);const p=()=>{const e=we+"/api/products/get-products";console.log(e),_e.a.get(e).then(e=>{e.data.products&&(t(e.data.products),o(e.data.products))}).catch(e=>{alert("no.")})};return n.a.createElement("div",null,n.a.createElement(X,{search:c,handleSearch:e=>{s(e)},handleClick:()=>{if(!c)return o(e),void m(!1);const t=`${we}/search?search=${c}&loc=${localStorage.getItem("userLoc")}`;_e.a.get(t).then(e=>{o(e.data.products),m(!0)}).catch(e=>{alert("Server Error.")})}}),n.a.createElement(je,{handleCategory:t=>{if("All"===t)o(e);else{const a=e.filter(e=>e.category===t);o(a)}m(!1)}}),n.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},a.map((e,t)=>(console.log(`${we}/uploads/${e.pimage}`),n.a.createElement("div",{key:e._id,className:"card m-3",onClick:()=>{e._id}},n.a.createElement(Ce.a,{to:"/product/"+e._id},n.a.createElement("img",{width:"280px",height:"250px",src:`${we}/uploads/${e.pimage}`,alt:e.pname})),n.a.createElement("div",{className:"quicklook"},"Quicklook"),n.a.createElement("h2",{className:"new"},e.pname),n.a.createElement("p",{className:"new"},e.pdesc),n.a.createElement("h3",{className:"new"},"$",e.price," ")))),0===a.length&&!i&&n.a.createElement("h5",null,"No Products Found")))};var Te=function(){const[e,t]=Object(r.useState)(null),[a,o]=Object(r.useState)(""),[c,s]=Object(r.useState)(""),[i,m]=Object(r.useState)(""),[u,d]=Object(r.useState)(""),[p,h]=Object(r.useState)(""),[E,g]=Object(r.useState)("");return Object(r.useEffect)(()=>{},[]),e?n.a.createElement(l.a,{to:e}):n.a.createElement("div",null,n.a.createElement(X,null),n.a.createElement("div",{className:"p-3"},n.a.createElement("h2",null," ADD PRODUCT HERE : "),n.a.createElement("label",null," Product Name "),n.a.createElement("input",{className:"form-control",type:"text",value:a,onChange:e=>o(e.target.value)}),n.a.createElement("label",null," Product Description "),n.a.createElement("input",{className:"form-control",type:"text",value:c,onChange:e=>s(e.target.value)}),n.a.createElement("label",null," Product Price "),n.a.createElement("input",{className:"form-control",type:"text",value:i,onChange:e=>m(e.target.value)}),n.a.createElement("label",null," Product Category "),n.a.createElement("select",{className:"form-control",value:u,onChange:e=>d(e.target.value)},n.a.createElement("option",null," Bikes "),n.a.createElement("option",null," Mobiles "),n.a.createElement("option",null," Cloth "),xe&&xe.length>0&&xe.map((e,t)=>n.a.createElement("option",{key:"option"+t}," ",e," "))),n.a.createElement("label",null," Product Image "),n.a.createElement("input",{className:"form-control",type:"file",onChange:e=>h(e.target.files[0])}),n.a.createElement("label",null," Product Second Image "),n.a.createElement("input",{className:"form-control",type:"file",onChange:e=>g(e.target.files[0])}),n.a.createElement("button",{onClick:()=>{navigator.geolocation.getCurrentPosition(e=>{const r=new FormData;r.append("pname",a),r.append("pdesc",c),r.append("price",i),r.append("category",u),r.append("userId",localStorage.getItem("userId")),r.append("plat",e.coords.latitude.toString()),r.append("plong",e.coords.longitude.toString()),p&&E&&(r.append("pimage",p),r.append("pimage2",E));const n=we+"/api/products/add-product";console.log(n),_e.a.post(n,r).then(e=>{alert(e.data.message),t("/")}).catch(e=>{console.error("Error submitting form:",e),alert("Could not find endpoint or other error: "+e.message)})},e=>{console.error("Geolocation error:",e),alert("Error getting location: "+e.message)})},className:"btn btn-primary mt-3"}," SUBMIT ")))};a(426);var Pe=function(){const e=Object(l.f)(),t=de(),[a,o]=Object(r.useState)(0),[c,s]=Object(r.useState)(),[i,m]=Object(r.useState)(),u=Object(l.g)(),[d,p]=Object(r.useState)(null);if(Object(r.useEffect)(()=>{const e=we+"/api/products/product/"+u.productId;console.log(e),_e.a.get(e).then(e=>{e.data.product&&s(e.data.product)}).catch(e=>{alert("Server Err.")})},[u.productId]),d)return n.a.createElement(l.a,{to:d});const h=e=>{o(e)};return n.a.createElement("div",null,n.a.createElement(X,null),n.a.createElement("div",{className:"product-detail-page"},n.a.createElement("div",{className:"product-detail-container"},n.a.createElement("div",{className:"product-content"},c&&n.a.createElement("div",{className:"product-images-container"},n.a.createElement("div",{className:"image-wrapper"},n.a.createElement("span",{className:"arrow left-arrow",onClick:()=>h(0===a?1:0)},"\u25c0"),n.a.createElement("img",{className:"product-image",src:we+"/uploads/"+(0===a?c.pimage:c.pimage2),alt:c.pname}),n.a.createElement("span",{className:"arrow right-arrow",onClick:()=>h(1===a?0:1)},"\u25b6"))),n.a.createElement("div",{className:"product-info"},n.a.createElement("h3",{className:"product-name"},null===c||void 0===c?void 0:c.pname," | ",null===c||void 0===c?void 0:c.category),n.a.createElement("h3",{className:"product-price"},"$ ",null===c||void 0===c?void 0:c.price),n.a.createElement("h2",{className:"product-description"},null===c||void 0===c?void 0:c.pdesc),(null===c||void 0===c?void 0:c.addedBy)&&n.a.createElement("button",{className:"contact-button",onClick:()=>{return a=c.addedBy,void(localStorage.getItem("userId")?t(a).then(t=>{const r=t.filter(e=>Array.isArray(e.participants)).find(e=>e.participants.includes(a));r&&r._id?e.push("/chat/"+r._id):e.push("/chat/new?userId="+a)}).catch(e=>{console.error("Error fetching conversation details:",e),alert("Failed to retrieve conversation details")}):console.error("User is not logged in"));var a}},n.a.createElement(J.a,{icon:M.a}),n.a.createElement("span",{className:"icon-text"},"Chat with Seller")),n.a.createElement("button",{className:"contact-button2",onClick:()=>{return t=c.addedBy,void e.push("/report/"+t);var t}},n.a.createElement(J.a,{icon:M.c}),n.a.createElement("span",{className:"icon-text"},"Report Buyer")),(null===c||void 0===c?void 0:c.addedBy)&&n.a.createElement("button",{className:"contact-button2",onClick:()=>(e=>{const t=`${we}/api/users/get-user/${e}`;console.log(t),_e.a.get(t).then(e=>{e.data.user?m(e.data.user):alert(e.data.message)}).catch(e=>{alert("Server Err: "+e.message)})})(c.addedBy)},n.a.createElement(J.a,{icon:M.d}),n.a.createElement("span",{className:"icon-text"},"Show  Details")),i&&n.a.createElement("div",{className:"user-info"},n.a.createElement("h4",{className:"username"},i.username),n.a.createElement("p",{className:"user-contact"},i.mobile),n.a.createElement("p",{className:"user-email"},i.email)))))))},ke=a(84);var Re=function(){const[e,t]=Object(r.useState)([]),[a,o]=Object(r.useState)([]),[c,l]=Object(r.useState)(""),[s,i]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{const e=localStorage.getItem("userId");if(!s){i(!0);const a=`${we}/api/products/my-products/${e}`;_e.a.get(a).then(e=>{e.data.products&&(t(e.data.products),o(e.data.products)),i(!1)}).catch(e=>{alert("Server error. Please try again later."),i(!1)})}},[]),n.a.createElement("div",null,n.a.createElement(X,{search:c,handleSearch:e=>{l(e)},handleClick:()=>{let t=e.filter(e=>e.pname.toLowerCase().includes(c.toLowerCase())||e.pdesc.toLowerCase().includes(c.toLowerCase())||e.category.toLowerCase().includes(c.toLowerCase()));o(t)}}),n.a.createElement(je,{handleCategory:t=>{let a=e.filter(e=>e.category===t);o(a)}}),n.a.createElement("h5",null," ALL RESULTS "),n.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},e&&e.length>0&&e.map((e,a)=>n.a.createElement("div",{key:e._id,className:"card m-3"},n.a.createElement("div",{className:"icon-con"},n.a.createElement(ke.a,{className:"icons text-danger",style:{marginLeft:"10px"},onClick:()=>(e=>{if(!window.confirm("Are you sure you want to delete this product?"))return;const a=`${we}/delete-product/${e}`;_e.a.delete(a).then(a=>{"Product deleted successfully"===a.data.message?(alert("Product deleted."),t(t=>t.filter(t=>t._id!==e)),o(t=>t.filter(t=>t._id!==e))):alert(a.data.message)}).catch(e=>{alert("Server Error. Please try again later.")})})(e._id)})),n.a.createElement("img",{width:"280px",height:"250px",src:`${we}/uploads/${e.pimage}`,alt:"Product"}),n.a.createElement("p",{className:"m-2"}," ",e.pname," | ",e.category," "),n.a.createElement("h3",{className:"m-2 text-danger"}," $",e.price," "),n.a.createElement("p",{className:"m-2 text-success"}," ",e.pdesc," ")))))};var Ie=function(){const{searchQuery:e}=Object(l.g)(),[t,a]=Object(r.useState)([]);return Object(r.useEffect)(()=>{(async()=>{const t="http://localhost:4000/api/products/search?search="+encodeURIComponent(e),r=await fetch(t),n=await r.json();console.log("he",n);try{const e=await fetch(t),r=await e.json();e.ok?a(r.products):console.error("Failed to fetch products:",r.message)}catch(o){console.error("Error fetching products:",o)}})()},[e]),n.a.createElement(n.a.Fragment,null,n.a.createElement(X,null),n.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},t.map((e,t)=>(console.log(`${we}/uploads/${e.pimage}`),n.a.createElement("div",{key:e._id,className:"card m-3",onClick:()=>{e._id}},n.a.createElement(Ce.a,{to:"/product/"+e._id},n.a.createElement("img",{width:"280px",height:"250px",src:`${we}/uploads/${e.pimage}`,alt:e.pname})),n.a.createElement("h3",{className:"m-2 price-text"},e.pname," "),n.a.createElement("h3",{className:"m-2 price-text"},"$",e.price," "),n.a.createElement("p",{className:"m-2"},e.category),n.a.createElement("p",{className:"m-2 text-success"},e.pdesc)))),0===t.length&&n.a.createElement("h5",null,"No Products Found")))};a(427);var Ue=function(){const e=Object(l.f)(),{sellerId:t}=Object(l.g)(),[a,o]=Object(r.useState)("");return localStorage.getItem("userId"),n.a.createElement("div",{className:"report-form-container"},n.a.createElement("h1",{className:"report-form-title"},n.a.createElement(J.a,{icon:M.b})," Report Seller"),n.a.createElement("textarea",{className:"report-form-textarea",value:a,onChange:e=>o(e.target.value),placeholder:"Describe the issue",rows:"5",cols:"33"}),n.a.createElement("button",{className:"report-form-button",onClick:async()=>{if(console.log(`Report for seller ${t} with reason: ${a}`),!t||!a)return void alert("All fields are required.");const r=`${we}/api/reports/report/${t}`,n=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportedUserId:t,message:a})}),o=await n.json();201===n.status?(alert("Report submitted successfully!"),e.push("/")):alert("Failed to submit report: "+o.message)}},"Submit Report"))};var Ae=()=>{const[e,t]=Object(r.useState)([]);return Object(r.useEffect)(()=>{const e=localStorage.getItem("userId");console.log(e);(async()=>{const a=await fetch("http://localhost:4000/api/reports/get-reports/"+e),r=await a.json();console.log(r),t(r)})()},[]),n.a.createElement("div",null,n.a.createElement(X,null),n.a.createElement("style",null,"\n                    .report-table {\n                        width: 100%;\n                        border-collapse: collapse;\n                        margin-top: 20px;\n                        box-shadow: 0 2px 3px rgba(0,0,0,0.1);\n                    }\n                    .report-table th, .report-table td {\n                        padding: 12px 15px;\n                        text-align: left;\n                        border-bottom: 1px solid #ddd;\n                    }\n                    .report-table th {\n                        background-color: black;\n                        color: white;\n                    }\n                    .report-table tbody tr:nth-child(even) {\n                        background-color: #f2f2f2;\n                    }\n                    .report-table tbody tr:hover {\n                        background-color: #ddd;\n                    }\n                    @media screen and (max-width: 600px) {\n                        .report-table th, .report-table td {\n                            padding: 10px;\n                        }\n                    }\n                "),n.a.createElement("h1",null,"All Reports"),n.a.createElement("table",{className:"report-table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Report ID"),n.a.createElement("th",null,"Message"))),n.a.createElement("tbody",null,e.map(e=>n.a.createElement("tr",{key:e._id},n.a.createElement("td",null,e._id),n.a.createElement("td",null,e.message))))))};var De=function(){const{catName:e}=Object(l.g)(),[t,a]=Object(r.useState)([]),[o,c]=Object(r.useState)([]),[s,i]=Object(r.useState)(""),[m,u]=Object(r.useState)(!1),[d,p]=Object(r.useState)(null);return Object(r.useEffect)(()=>{(async()=>{try{const t="All Categories"===e?we+"/api/products/get-products":we+"/api/products/get-products?catName="+e,r=await _e.a.get(t);r.data.products&&(a(r.data.products),c(r.data.products))}catch(t){alert("Server Err.")}})()},[e]),d?n.a.createElement(l.a,{to:d}):n.a.createElement("div",null,n.a.createElement(X,{search:s,handleSearchChange:e=>{i(e)},handleSearchClick:async()=>{u(!0);try{const e=we+"/search?search="+s,t=await _e.a.get(e);c(t.data.products)}catch(e){alert("Server Err.")}}}),n.a.createElement(je,{handleCategory:e=>{if("All Categories"===e)c(t);else{const a=t.filter(t=>t.category===e);c(a)}}}),m&&n.a.createElement("h5",null," SEARCH RESULTS",n.a.createElement("button",{className:"clear-btn",onClick:()=>u(!1)}," CLEAR ")),m&&0===o.length&&n.a.createElement("h5",null," No Results Found "),n.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},o.map(e=>n.a.createElement("div",{key:e._id,className:"card m-3",onClick:()=>{return t=e._id,void p("/product/"+t);var t}},n.a.createElement("img",{width:"280px",height:"250px",src:we+"/"+e.pimage,alt:e.pname}),n.a.createElement("h3",{className:"m-2 price-text"}," $ ",e.price," "),n.a.createElement("p",{className:"m-2"}," ",e.pname," | ",e.category," "),n.a.createElement("p",{className:"m-2 text-success"}," ",e.pdesc," ")))))};const Le=Object(s.a)({palette:{primary:{light:"#58a5f0",main:"#0277bd",dark:"#004c8c"},secondary:{light:"#ffd95a",main:"#f9a825",dark:"#c17900",contrastText:"#212121"},background:{default:"#f0f0f0"}},typography:{useNextVariants:!0}});var We=function(){return n.a.createElement(m.a,{theme:Le},n.a.createElement(i.a,null),n.a.createElement(u.SnackbarProvider,{maxSnack:3,autoHideDuration:3e3},n.a.createElement(l.c,{history:p},n.a.createElement(l.b,{path:"/",exact:!0,component:I}),n.a.createElement(l.b,{path:"/home",exact:!0,component:ye}),n.a.createElement(S,{path:"/chat",component:Oe}),n.a.createElement(l.b,{path:"/add-product",exact:!0,component:Te}),n.a.createElement(l.b,{path:"/product/:productId",exact:!0,component:Pe}),n.a.createElement(l.b,{path:"/my-products/:userId",exact:!0,component:Re}),n.a.createElement(l.b,{path:"/search-results/:searchQuery",exact:!0,component:Ie}),n.a.createElement(l.b,{path:"/report/:sellerId",exact:!0,component:Ue}),n.a.createElement(l.b,{path:"/reports/:userId",exact:!0,component:Ae}),n.a.createElement(l.b,{path:"/category/:category",exact:!0,component:De}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[239,1,2]]]);
//# sourceMappingURL=main.570e7a82.chunk.js.map